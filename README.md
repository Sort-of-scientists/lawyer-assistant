# Инструкция по установке
1. Убедиться, что на запускаемой машине установлены:```python```, ```pip```, ```docker```, ```docker-compose```, ```git```
2. Склонировать репозиторий:
   - ```git clone https://github.com/vkimbris/lawyer-assistant.git```
3. Перейти в папку с проектом и создать виртуальное окружение:
   - ```cd lawyer-assistant```
   - ```python -m venv env```
   - ```source env/bin/activate``` (для Linux и MacOS)
4. Установить ```dvc``` для загрузки моделей с нашего S3:
   ```pip install dvc dvc-s3```
5. Установить ключ и токен от нашего S3:
   - ```dvc remote modify --local storage access_key_id YCAJEk1Dap7upINca7OgHQ2MM```
   - ```dvc remote modify --local storage secret_access_key YCMEeVSyCwieGkX2JfbJWRnrnhzpHjsmej4OqUXb```
6. Скачать модели:
   - ```dvc pull```
7. Перейти в папку deployment и собрать приложение:
   - ```cd deployment```
   - ```docker-compose up --build```
8. Перейти на http://0.0.0.0:8018/main

# Инструкция по взаимодействию с UI
https://docs.google.com/document/d/1sj0z-wmZl1iY0Z8z0lTckUFw-intcrzni3oKj4s2i6Q/edit?usp=sharing

# Документация API

Этот API предоставляет несколько эндпоинтов для обработки документов, включая генерацию документов с использованием LLM API, суммаризации текста, классификацию, распознавание сущностей и другие функции. Он поддерживает работу с документами и позволяет производить операции добавления, удаления и получения информации о документах.

## Эндпоинты

### 1. `/generate` (POST)
**Описание**: Этот эндпоинт генерирует документ с использованием LLM API.  
**Параметры**:  
- `input` (тип: `GenerateInputModel`) — модель входных данных для генерации документа.  
**Возвращаемые данные**:  
- **200 OK**: Возвращает успешный ответ с потоком данных.
- **422 Unprocessable Entity**: Ошибка валидации.

### 2. `/summarize` (POST)
**Описание**: Эндпоинт для создания краткого изложения документа.  
**Параметры**:
- `document_id` (тип: `str`) — ID документа для суммаризации.
- `n_sentences_to_keep` (тип: `int`, необязательный) — количество предложений для сохранения.
- `n_predict` (тип: `int`, необязательный) — количество токенов для генерации в резюме.
- `temperature` (тип: `float`, необязательный) — температура генерации.
**Возвращаемые данные**:
- **200 OK**: Возвращает текстовое резюме документа.
- **422 Unprocessable Entity**: Ошибка валидации.

### 3. `/classify` (POST)
**Описание**: Эндпоинт для классификации документа.  
**Параметры**:
- `text` (тип: `string`) — текст для классификации.
**Возвращаемые данные**:
- **200 OK**: Возвращает модель с меткой и оценкой (предсказанный класс и уверенность в предсказании).
- **422 Unprocessable Entity**: Ошибка валидации.

### 4. `/entity-recognize` (POST)
**Описание**: Эндпоинт для распознавания сущностей в тексте.  
**Параметры**:
- `text` (тип: `string`) — текст для распознавания сущностей.
**Возвращаемые данные**:
- **200 OK**: Возвращает список распознанных сущностей с их метками, оценками и позициями в тексте.
- **422 Unprocessable Entity**: Ошибка валидации.

### 5. `/upsert` (POST)
**Описание**: Эндпоинт для добавления или обновления документа.  
**Параметры**:
- `document_id` (тип: `string`, необязательный) — ID документа для обновления (если передан).
- `file` (тип: `binary`, обязательный) — файл документа.
**Возвращаемые данные**:
- **200 OK**: Успешный ответ.
- **422 Unprocessable Entity**: Ошибка валидации.

### 6. `/documents` (GET)
**Описание**: Эндпоинт для получения списка документов.  
**Возвращаемые данные**:
- **200 OK**: Возвращает массив документов.

### 7. `/document` (GET)
**Описание**: Эндпоинт для получения информации о документе по его ID.  
**Параметры**:
- `document_id` (тип: `string`) — ID документа.
**Возвращаемые данные**:
- **200 OK**: Возвращает документ.
- **422 Unprocessable Entity**: Ошибка валидации.

### 8. `/document` (DELETE)
**Описание**: Эндпоинт для удаления документа по его ID.  
**Параметры**:
- `document_id` (тип: `string`) — ID документа.
**Возвращаемые данные**:
- **200 OK**: Успешный ответ.
- **422 Unprocessable Entity**: Ошибка валидации.

### 9. `/download` (GET)
**Описание**: Эндпоинт для загрузки документа по его ID.  
**Параметры**:
- `document_id` (тип: `string`) — ID документа.
**Возвращаемые данные**:
- **200 OK**: Возвращает документ.
- **422 Unprocessable Entity**: Ошибка валидации.

### 10. `/forms` (GET)
**Описание**: Эндпоинт для получения форм по типу документа.  
**Параметры**:
- `document_type` (тип: `string`) — тип документа.
**Возвращаемые данные**:
- **200 OK**: Возвращает список форм.
- **422 Unprocessable Entity**: Ошибка валидации.

### 11. `/types` (GET)
**Описание**: Эндпоинт для получения типов документов.  
**Возвращаемые данные**:
- **200 OK**: Возвращает список типов документов.

### 12. `/` (GET)
**Описание**: Эндпоинт для проверки состояния API (корневой эндпоинт).  
**Возвращаемые данные**:
- **200 OK**: Ответ с подтверждением работы API.

# Примечание
За короткое время мы не успели доработать nginx и при перезагрузке страницы нужно вручную переходить на адрес **http://localhost:8018/ **
